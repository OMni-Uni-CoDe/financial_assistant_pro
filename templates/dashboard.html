{% extends "base.html" %}
{% block content %}
<div class="container">
    <a href="/logout" class="logout">Logout</a>
    <h2>Welcome, {{ username }}</h2>


    <div class="top-row">
        <div class="left">
            <h3>Add Expense</h3>
            <form id="expenseForm">
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                <input type="text" name="category" placeholder="Category" required>
                <input type="number" step="0.01" name="amount" placeholder="Amount" required>
                <button type="submit">Add</button>
            </form>
            <p id="expenseMsg"></p>


            <div class="actions">
                <button id="csvBtn">CSV Report</button>
                <button id="pdfBtn">PDF Report</button>
                <button id="predictBtn">Predict Future</button>
            </div>
            <p id="prediction"></p>
        </div>


        <div class="right">
            <div class="ai-card">
                <h4>AI Assistant</h4>
                <form id="askForm">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    <input type="text" name="question" placeholder="Ask about your spending..." required>
                    <button type="submit">Ask</button>
                </form>
                <div id="response"></div>
                <div id="confidence"></div>
            </div>


            <div class="history-card">
                <h4>Recent Activity</h4>
                <div id="history"></div>
            </div>
        </div>
    </div>


    <div class="charts">
        <canvas id="categoryChart"></canvas>
        <canvas id="trendChart"></canvas>
    </div>
</div>


<!-- The JS to drive charts/history is loaded from base.html -->
{% endblock %}